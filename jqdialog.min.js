/**
	Kailash Nadh,	http://kailashnadh.name
	September 2011
	Smooth popup dialog for jQuery
	http://kailashnadh.name/code/jqdialog

	License: GPL

	v1.4	September 21 2011	-	Added support for Enter and Escape keyboard shortcuts.
	v1.3.1	April 4 2011	-	Fixed an IE compatibility issue. Thanks to Filip Vojtisek.
	v1.3	February 6 2011	-	Rewrote the whole plugin to comply with jQuery's plugin standards
	v1.2	September 2 2009
**/(function(e){var t=null;e.jqDialog={escape_callback:null,enter_callback:null,labels:{ok:"Ok",yes:"Yes",no:"No",cancel:"Cancel"},ids:{div_overlay:"jqDialog_overlay",div_box:"jqDialog_box",div_content:"jqDialog_content",div_options:"jqDialog_options",bt_yes:"jqDialog_yes",bt_no:"jqDialog_no",bt_ok:"jqDialog_ok",bt_ancel:"jqDialog_ok",input:"jqDialog_input"},defaults:{overlay:!0},confirm:function(e,n,r){t.create(e);t.parts.bt_ok.hide();t.parts.bt_cancel.hide();t.parts.bt_yes.show();t.parts.bt_no.show();t.parts.bt_yes.focus();t.parts.bt_yes.unbind().click(function(){t.cleanKeypressCallbacks();t.close();n&&n()});t.enter_callback=function(){n&&n()};t.parts.bt_no.unbind().click(function(){t.cleanKeypressCallbacks();t.close();r&&r()});t.escape_callback=function(){r&&r()}},prompt:function(n,r,i,s){t.create(e("<div>").append(n).append(e("<div>").append(t.parts.input.val(r))));t.parts.bt_yes.hide();t.parts.bt_no.hide();t.parts.bt_ok.show();t.parts.bt_cancel.show();t.parts.input.focus();t.parts.bt_ok.unbind().click(function(){t.cleanKeypressCallbacks();t.close();i&&i(t.parts.input.val())});t.enter_callback=function(){i&&i(t.parts.input.val())};t.parts.bt_cancel.unbind().click(function(){t.cleanKeypressCallbacks();t.close();s&&s()});t.escape_callback=function(){s&&s()}},alert:function(e,n){t.create(e);t.parts.bt_cancel.hide();t.parts.bt_yes.hide();t.parts.bt_no.hide();t.parts.bt_ok.show();t.parts.bt_ok.focus();t.parts.bt_ok.unbind().click(function(){t.cleanKeypressCallbacks();t.close();n&&n()});t.escape_callback=function(){n&&n()}},content:function(e,n){t.create(e);t.parts.div_options.hide()},notify:function(e,n){t.content(e);n&&(t.close_timer=setTimeout(function(){t.close()},n*1e3))},create:function(e){t.check();t.makeCenter(t.parts.div_box);clearTimeout(t.close_timer);t.parts.div_content.html(e);t.parts.div_options.show();if(t.defaults.overlay){t.parts.div_box.show();t.parts.div_overlay.fadeIn("fast")}else t.parts.div_box.fadeIn("fast")},close:function(){t.defaults.overlay&&t.parts.div_overlay.fadeOut("fast");t.parts.div_box.fadeOut("fast");t.clearPosition()},clearPosition:function(){e(window).unbind("scroll.jqDialog")},makeCenter:function(e){e.css({marginTop:-e.height()/2+"px",marginLeft:-e.width()/2+"px"})},init_done:!1,check:function(){if(t.init_done)return;t.init_done=!0;t.defaults.overlay?e("body").append(t.parts.div_overlay):e("body").append(t.parts.div_box)},init:function(){t.parts={};t.parts.div_overlay=e("<div>").attr({id:t.ids.div_overlay});t.parts.div_box=e("<div>").attr({id:t.ids.div_box});t.parts.div_content=e("<div>").attr({id:t.ids.div_content});t.parts.div_options=e("<div>").attr({id:t.ids.div_options});t.parts.bt_yes=e("<button>").attr({id:t.ids.bt_yes}).append(t.labels.yes);t.parts.bt_no=e("<button>").attr({id:t.ids.bt_no}).append(t.labels.no);t.parts.bt_ok=e("<button>").attr({id:t.ids.bt_ok}).append(t.labels.ok);t.parts.bt_cancel=e("<button>").attr({id:t.ids.bt_cancel}).append(t.labels.cancel);t.parts.input=e("<input>").attr({id:t.ids.input});t.parts.div_box.append(t.parts.div_content).append(t.parts.div_options.append(t.parts.bt_yes).append(t.parts.bt_no).append(t.parts.bt_ok).append(t.parts.bt_cancel));if(t.defaults.overlay){t.parts.div_overlay.append(t.parts.div_box);t.parts.div_overlay.hide()}else t.parts.div_box.hide();e(document).keyup(function(e){if(e.altKey)return;e.keyCode===13&&t.enterPressed();e.keyCode===27&&t.escapePressed()})},reinit:function(){t.parts.div_overlay.remove();t.parts.div_box.remove();t.init_done=!1;t.init()},setDefaults:function(n){e.extend(t.defaults,n)},cleanKeypressCallbacks:function(){t.enter_callback=null;t.escape_callback=null},escapePressed:function(){t.close();if(t.escape_callback){t.enter_callback=null;t.escape_callback();t.escape_callback=null}},enterPressed:function(){t.close();if(t.enter_callback){t.escape_callback=null;t.enter_callback();t.enter_callback=null}}};t=e.jqDialog;e.jqDialog.init()})(jQuery);